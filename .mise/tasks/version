#!/usr/bin/env bash
#MISE description="Bump prerelease version for 'next' tag"
#USAGE flag "-t --tag <tag>" "Tag for versioning strategy (next|latest)" default="next"

set -e

echo "Bumping version"
echo " > with tag: ${usage_tag}..."

# Only bump prerelease for "next" development cycle
# "latest" versions are managed by release-please
if [ "${usage_tag}" = "next" ]; then
  echo "Bumping prerelease version for 'next' tag..."
  bun pm version prerelease
  echo " > Next version: $(jq -r '.version' package.json)"
elif [ "${usage_tag}" = "latest" ]; then
  echo "ℹ️  'latest' version bumps are managed by release-please"
  echo "    This task only handles 'next' prerelease bumps"
  echo "    Current version: $(jq -r '.version' package.json)"
else
  echo "❌ Unknown tag: ${usage_tag}"
  echo "   Use: --tag next (default) or --tag latest"
  exit 1
fi

echo "Version bump completed!"
